{"ast":null,"code":"import _asyncToGenerator from \"/home/ramon/Desktop/Institut Lacet\\xE0nia/S\\xEDntesi/Projecte/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { JOSEError, JWKSTimeout } from '../util/errors.js';\n\nconst fetchJwks = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* (url, timeout, options) {\n    let controller;\n    let id;\n    let timedOut = false;\n\n    if (typeof AbortController === 'function') {\n      controller = new AbortController();\n      id = setTimeout(() => {\n        timedOut = true;\n        controller.abort();\n      }, timeout);\n    }\n\n    const response = yield fetch(url.href, {\n      signal: controller ? controller.signal : undefined,\n      redirect: 'manual',\n      headers: options.headers\n    }).catch(err => {\n      if (timedOut) throw new JWKSTimeout();\n      throw err;\n    });\n    if (id !== undefined) clearTimeout(id);\n\n    if (response.status !== 200) {\n      throw new JOSEError('Expected 200 OK from the JSON Web Key Set HTTP response');\n    }\n\n    try {\n      return yield response.json();\n    } catch (_a) {\n      throw new JOSEError('Failed to parse the JSON Web Key Set HTTP response as JSON');\n    }\n  });\n\n  return function fetchJwks(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default fetchJwks;","map":{"version":3,"sources":["/home/ramon/Desktop/Institut Lacetània/Síntesi/Projecte/node_modules/jose/dist/browser/runtime/fetch_jwks.js"],"names":["JOSEError","JWKSTimeout","fetchJwks","url","timeout","options","controller","id","timedOut","AbortController","setTimeout","abort","response","fetch","href","signal","undefined","redirect","headers","catch","err","clearTimeout","status","json","_a"],"mappings":";AAAA,SAASA,SAAT,EAAoBC,WAApB,QAAuC,mBAAvC;;AACA,MAAMC,SAAS;AAAA,+BAAG,WAAOC,GAAP,EAAYC,OAAZ,EAAqBC,OAArB,EAAiC;AAC/C,QAAIC,UAAJ;AACA,QAAIC,EAAJ;AACA,QAAIC,QAAQ,GAAG,KAAf;;AACA,QAAI,OAAOC,eAAP,KAA2B,UAA/B,EAA2C;AACvCH,MAAAA,UAAU,GAAG,IAAIG,eAAJ,EAAb;AACAF,MAAAA,EAAE,GAAGG,UAAU,CAAC,MAAM;AAClBF,QAAAA,QAAQ,GAAG,IAAX;AACAF,QAAAA,UAAU,CAACK,KAAX;AACH,OAHc,EAGZP,OAHY,CAAf;AAIH;;AACD,UAAMQ,QAAQ,SAASC,KAAK,CAACV,GAAG,CAACW,IAAL,EAAW;AACnCC,MAAAA,MAAM,EAAET,UAAU,GAAGA,UAAU,CAACS,MAAd,GAAuBC,SADN;AAEnCC,MAAAA,QAAQ,EAAE,QAFyB;AAGnCC,MAAAA,OAAO,EAAEb,OAAO,CAACa;AAHkB,KAAX,CAAL,CAIpBC,KAJoB,CAIbC,GAAD,IAAS;AACd,UAAIZ,QAAJ,EACI,MAAM,IAAIP,WAAJ,EAAN;AACJ,YAAMmB,GAAN;AACH,KARsB,CAAvB;AASA,QAAIb,EAAE,KAAKS,SAAX,EACIK,YAAY,CAACd,EAAD,CAAZ;;AACJ,QAAIK,QAAQ,CAACU,MAAT,KAAoB,GAAxB,EAA6B;AACzB,YAAM,IAAItB,SAAJ,CAAc,yDAAd,CAAN;AACH;;AACD,QAAI;AACA,mBAAaY,QAAQ,CAACW,IAAT,EAAb;AACH,KAFD,CAGA,OAAOC,EAAP,EAAW;AACP,YAAM,IAAIxB,SAAJ,CAAc,4DAAd,CAAN;AACH;AACJ,GA/Bc;;AAAA,kBAATE,SAAS;AAAA;AAAA;AAAA,GAAf;;AAgCA,eAAeA,SAAf","sourcesContent":["import { JOSEError, JWKSTimeout } from '../util/errors.js';\nconst fetchJwks = async (url, timeout, options) => {\n    let controller;\n    let id;\n    let timedOut = false;\n    if (typeof AbortController === 'function') {\n        controller = new AbortController();\n        id = setTimeout(() => {\n            timedOut = true;\n            controller.abort();\n        }, timeout);\n    }\n    const response = await fetch(url.href, {\n        signal: controller ? controller.signal : undefined,\n        redirect: 'manual',\n        headers: options.headers,\n    }).catch((err) => {\n        if (timedOut)\n            throw new JWKSTimeout();\n        throw err;\n    });\n    if (id !== undefined)\n        clearTimeout(id);\n    if (response.status !== 200) {\n        throw new JOSEError('Expected 200 OK from the JSON Web Key Set HTTP response');\n    }\n    try {\n        return await response.json();\n    }\n    catch (_a) {\n        throw new JOSEError('Failed to parse the JSON Web Key Set HTTP response as JSON');\n    }\n};\nexport default fetchJwks;\n"]},"metadata":{},"sourceType":"module"}